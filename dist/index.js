$(document).ready(function () { function a(a, c, d, e, f) { $.post("/api/beers", { name: a, ABV: c, IBU: d, beerType: e, description: f, BreweryId: $.urlParam("breweryid") }).then(function () { window.location.replace("/beers") }).catch(b) } function b(a) { $("#alert .msg").text(a.responseJSON), $("#alert").fadeIn(500) } const c = $("form#add-beer"), d = $("input#beerName"), e = $("input#IBU"), f = $("input#ABV"), g = $("input#beerType"), h = $("input#beerDesc"); $.urlParam = function (a) { var b = new RegExp("[?&]" + a + "=([^&#]*)").exec(window.location.href); return null === b ? null : decodeURI(b[1]) || 0 }, c.on("submit", function (b) { b.preventDefault(); const c = { name: d.val().trim(), IBU: e.val().trim(), ABV: f.val().trim(), beerType: g.val().trim(), description: h.val().trim() }; c.name && c.ABV && c.beerType && c.description && (a(c.name, c.ABV, c.IBU, c.beerType, c.description), d.val(""), e.val(""), f.val(""), g.val(""), h.val("")) }) }), $(function () { $("#signUp").on("click", function (a) { a.preventDefault(); var b = { email: $("#email").val().trim(), password: $("#password").val().trim() }; $.ajax("/api/signup", { type: "POST", data: b }).then(function () { window.location.replace("/") }) }) }), $(function () { $("#log").click("submit", function (a) { a.preventDefault(); var b = { email: $("#email").val().trim(), password: $("#password").val().trim() }; $.ajax("/api/login", { type: "POST", data: b }).then(function (a) { window.location.href = "/users/" + a.id }) }) }), $(function () { $("#brewery").click("submit", function (a) { a.preventDefault(), $.get("/api/user_data").then(a => { var b = { name: $("#breweryName").val().trim(), address: $("#breweryAddress").val().trim(), phoneNumber: $("#breweryNumber").val().trim(), UserId: a.id }; $.ajax("/api/brewery", { type: "POST", data: b }).then(function ({ id: a }) { window.location.replace("/beers/add?breweryid=" + a) }) }) }) }), $(function () { $(".change-stock").on("click", function () { var a = $(this).data("id"), b = $(this).data("outOfStock"); $.ajax("/api/beerform/" + a, { type: "PUT", data: { stockAvail: b } }).then(function () { console.log("changed stock to", b), location.reload() }) }), $(".delete").on("click", function () { const a = $(this).attr("data-id"); $.ajax(`/api/beerForm/${a}`, { type: "DELETE" }).then(() => { console.log(`deleted beer with id ${a}`), location.reload() }) }) }), $(".brewery").on("click", function () { console.log("hit"); const a = $(this).data("id"); console.log(a), location.href = "/brewery/" + a + "?breweryid=" + a });


